{"version":3,"sources":["node_modules/browser-pack/_prelude.js","lib/Admin.js","lib/Category.js","lib/Discourse.js","lib/Post.js","lib/Requestable.js","lib/Topic.js","lib/User.js"],"names":[],"mappings":"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","file":"Discourse.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import Requestable from './Requestable';\n\nclass Admin extends Requestable {\n\n  constructor(auth, apiBase) {\n    super(auth, apiBase)\n  }\n\n  /**\n   * Generate Api key for user\n   * @param {object} [object] \n   * @param {string} [object.username ]\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  generateApiKey({ username }, options, cb) {\n\n    const data = { key: { username } };\n\n    return this._request('POST', '/admin/api/keys', data, options, cb);\n\n  };\n\n}\n\nmodule.exports = Admin","import Requestable from './Requestable';\n\nclass Category extends Requestable {\n\n    constructor(auth, apiBase) {\n        super(auth, apiBase)\n    }\n\n    /**\n     * Get all categories\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getAll(options, cb) {\n        return this._request('GET', '/categories.json', null, options, cb);\n    };\n\n     /**\n     * Get all topics related with category\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getTopics(categoryId, options, cb) {\n        return this._request('GET', `/c/${categoryId}.json`, null, options, cb);\n    };\n\n}\n\nmodule.exports = Category","\nimport Admin from './Admin';\nimport User from './User';\nimport Post from './Post';\nimport Topic from './Topic';\nimport Category from './Category';\n\nclass Discourse {\n\n    /**\n    * Create a new Discourse.\n    * @param {Requestable.auth} [auth] - the credentials to authenticate to Discourse.\n    * @param {string} [apiBase] - the base Discourse API URL\n    */\n    constructor(auth, apiBase) {\n        this.__apiBase = apiBase;\n        this.__auth = auth || {};\n    }\n\n    /**\n    * Create a new Admin wrapper\n    * @return {Admin}\n    */\n    getAdmin() {\n        return new Admin(this.__auth, this.__apiBase);\n    }\n\n    /**\n    * Create a new User wrapper\n    * @return {User}\n    */\n    getUser() {\n        return new User(this.__auth, this.__apiBase);\n    }\n\n    /**\n    * Create a new Post wrapper\n    * @return {Post}\n    */\n    getPost() {\n        return new Post(this.__auth, this.__apiBase);\n    }\n\n    /**\n    * Create a new Topic wrapper\n    * @return {Topic}\n    */\n    getTopic() {\n        return new Topic(this.__auth, this.__apiBase);\n    }\n\n    /**\n     * Create a new Category wrapper\n     * @return {Category}\n     */\n    getCategory() {\n        return new Category(this.__auth, this.__apiBase);\n    }\n\n}\n\nmodule.exports = Discourse","import Requestable from './Requestable';\n\nclass Post extends Requestable {\n\n    constructor(auth, apiBase) {\n        super(auth, apiBase)\n    }\n\n    /**\n     * Get single posts.\n     * @param {number} [id] \n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getOne(id, options, cb) {\n        return this._request('GET', `/posts/${id}.json`, null, options, cb);\n    };\n\n    /**\n     * Get latest posts.\n     * @param {object} [object] \n     * @param {string} [object.username ]\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getLatest(options, cb) {\n        return this._request('GET', '/posts.json', null, options, cb);\n    };\n\n}\n\nmodule.exports = Post","import axios from 'axios';\n\n/**\n * The error structure returned when a network call fails\n */\nclass ResponseError extends Error {\n   /**\n    * Construct a new ResponseError\n    * @param {string} message - an message to return instead of the the default error message\n    * @param {string} path - the requested path\n    * @param {Object} response - the object returned by Axios\n    */\n   constructor(message, path, response) {\n      super(message);\n      this.path = path;\n      this.request = response.config;\n      this.response = (response || {}).response || response;\n      this.statusCode = response.status;\n   }\n}\n\n/**\n * Requestable wraps the logic for making http requests to the API\n */\nclass Requestable {\n\n   /**\n    * Initialize the http internals.\n    * @param {Requestable.auth} [auth] - the credentials to authenticate to discourse. If auth is\n    *                                  not provided request will be made unauthenticated\n    * @param {string} [apiBase=https://api.discourse.com] - the base discourse API URL\n    */\n   constructor(auth, apiBase) {\n      this.__apiBase = apiBase\n      this.__authSystemHeader = {\n         'Api-Key': auth.api_key,\n         'Api-Username': auth.api_username\n      }\n   }\n\n   /**\n    * Compute the URL to use to make a request.\n    * @private\n    * @param {string} path - either a URL relative to the API base or an absolute URL\n    * @return {string} - the URL to use\n    */\n   __getURL(path) {\n\n      const url = this.__apiBase + path;\n\n      return url\n   }\n\n   /**\n    * Compute the headers required for an API request.\n    * @private\n    * @return {Object} - the headers to use in the request\n    */\n   __getRequestHeaders(options) {\n\n      let headers = {\n         'Content-Type': 'application/json;charset=UTF-8',\n         'Accept': 'application/json'\n      };\n\n      if (options) {\n         // If Auth is system|admin user\n         if (options.isAdmin) {\n            headers = { ...headers, ...this.__authSystemHeader };\n            return headers;\n         }\n\n         // If auth with user credentials\n         if (options.username && options.apiKey) {\n            headers = {\n               ...headers,\n               'Api-Key': options.apiKey,\n               'Api-Username': options.username\n            }\n         }\n      }\n\n      return headers;\n   }\n\n   /**\n    * Make a request.\n    * @param {string} method - the method for the request (GET, PUT, POST, DELETE)\n    * @param {string} path - the path for the request\n    * @param {*} [data] - the data to send to the server. For HTTP methods that don't have a body the data\n    *                   will be sent as query parameters\n    * @param {Requestable.callback} [cb] - the callback for the request\n    * @param {boolean} [raw=false] - if the request should be sent as raw. If this is a falsy value then the\n    *                              request will be made as JSON\n    * @return {Promise} - the Promise for the http request\n    */\n   async _request(method, path, data, options, cb) {\n\n      const url = this.__getURL(path);\n\n      const headers = this.__getRequestHeaders(options);\n\n      let queryParams = {};\n\n      const shouldUseDataAsParams = data && (typeof data === 'object') && methodHasNoBody(method);\n\n      if (shouldUseDataAsParams) {\n         queryParams = data;\n         data = undefined;\n      }\n\n      const config = {\n         url: url,\n         method: method,\n         headers: headers,\n         params: queryParams,\n         data: data,\n         responseType: 'json',\n      };\n\n      try {\n\n         const response = await axios(config);\n\n         if (response.data.hasOwnProperty('errors')) {\n\n            response.status = 400;\n\n            const errorMsg = 'message' in response.data\n               ? response.data.message\n               : JSON.stringify(response.data.errors)\n\n            let error = new ResponseError(errorMsg, path, response);\n            if (cb) {\n               cb(error)\n            } else {\n               throw error\n            }\n         }\n\n         if (cb) {\n            if (response.data && Object.keys(response.data).length > 0) {\n               // When data has results\n               cb(null, response.data, response);\n            } else if (config.method !== 'GET' && Object.keys(response.data).length < 1) {\n               // True when successful submit a request and receive a empty object\n               cb(null, (response.status < 300), response);\n            } else {\n               cb(null, response.data, response);\n            }\n         }\n\n         return response\n\n      } catch (error) {\n\n         if (!error.response) {\n            error = new ResponseError('Discourse api error: Response is undefined', path, {status: 500});\n            throw error\n         }\n\n         const errorMsg = 'message' in error.response.data\n            ? error.response.data.message\n            : JSON.stringify(error.response.data.errors)\n\n         error = new ResponseError(errorMsg, path, error.response);\n\n         if (cb) {\n            cb(error)\n         } else {\n            throw error\n         }\n      }\n   }\n\n   /**\n    * Make a request to an endpoint the returns 204 when true and 404 when false\n    * @param {string} path - the path to request\n    * @param {Object} data - any query parameters for the request\n    * @param {Requestable.callback} cb - the callback that will receive `true` or `false`\n    * @param {method} [method=GET] - HTTP Method to use\n    * @return {Promise} - the promise for the http request\n    */\n   _request204or404(path, data, cb, method = 'GET') {\n      return this._request(method, path, data)\n         .then(function success(response) {\n            if (cb) {\n               cb(null, true, response);\n            }\n            return true;\n         }, function failure(response) {\n            if (response.response.status === 404) {\n               if (cb) {\n                  cb(null, false, response);\n               }\n               return false;\n            }\n\n            if (cb) {\n               cb(response);\n            }\n            throw response;\n         });\n   }\n}\n\nmodule.exports = Requestable;\n\n// ////////////////////////// //\n//  Private helper functions  //\n// ////////////////////////// //\nconst METHODS_WITH_NO_BODY = ['GET', 'HEAD', 'DELETE'];\n\nfunction methodHasNoBody(method) {\n   return METHODS_WITH_NO_BODY.indexOf(method) !== -1;\n}\n\nfunction callbackErrorOrThrow(cb, path) {\n   return function handler(object) {\n      let error;\n      if (object.hasOwnProperty('config')) {\n         const { response: { status, statusText }, config: { method, url } } = object;\n         let message = (`${status} error making request ${method} ${url}: \"${statusText}\"`);\n         error = new ResponseError(message, path, object);\n      } else {\n         error = object;\n      }\n      if (cb) {\n         cb(error);\n      } else {\n         throw error;\n      }\n   };\n}\n","import Requestable from './Requestable';\n\nclass Topic extends Requestable {\n\n  constructor(auth, apiBase) {\n    super(auth, apiBase)\n  }\n\n\n  /**\n   * Get single topics\n   * @param {number} [id]\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  getOne(id, options, cb) {\n    return this._request('GET', `/t/${id}.json`, null, options, cb);\n  };\n\n  /**\n   * Get all topics\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  getAll(options, cb) {\n    return this._request('GET', '/topics', null, options, cb);\n  };\n\n  /**\n   * Get all topics by username.\n   * @param {object} [object]\n   * @param {string} [object.username]\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  getBy({ username }, options, cb) {\n    return this._request('GET', `/topics/created-by/${username}.json`, null, options, cb);\n  };\n\n\n  /**\n   * Get all latest topics\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  getLatest(options, cb) {\n    return this._request('GET', '/latest.json', null, options, cb);\n  };\n\n  /**\n   * Create topic|post|pm\n   * @param {object} [object]\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  create(data, options, cb) {\n\n    if (!data.raw) {\n      throw new Error('Raw is required.');\n    }\n\n    return this._request('POST', '/posts.json', data, options, cb);\n  };\n\n  /**\n   * Get private messages by username\n   * @param username\n   * @param options\n   * @param cb\n   */\n  getPrivateMessages({username}, options, cb) {\n    return this._request('GET', `/topics/private-messages/${username}.json`, null, options, cb)\n  };\n}\n\nmodule.exports = Topic\n","import Requestable from './Requestable';\n\nclass User extends Requestable {\n\n    constructor(auth, apiBase) {\n        super(auth, apiBase)\n    }\n\n    /**\n     * Create new user\n     * @param {object} [object]\n     * @param {string} [object.username]\n     * @param {string} [object.email]\n     * @param {string} [object.password]\n     * @param {string} [object.name]\n     * @param {boolean} [object.active]\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    create({ username, email, password, name, active }, options, cb) {\n        const data = {\n            'name': name,\n            'email': email,\n            'username': username,\n            'password': password,\n            'active': active\n        };\n        return this._request('POST', '/users', data, options, cb);\n    };\n\n    /**\n     * Get user by username\n     * @param {object} [object]\n     * @param {string} [object.username ]\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getOne({username}, options, cb) {\n        return this._request('GET', '/users/' + username + '.json', null, options, cb);\n    }\n\n    /**\n     * Delet user by id\n     * @param {number} [id]\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    delete(id, options, cb) {\n        return this._request('DELETE', '/admin/users/' + id + '.json', null, options, cb);\n    }\n\n    /**\n     * Update private message access\n     * @param data\n     * @param options\n     */\n    updatePMAccess(data, options, cb) {\n        return this._request('PUT', `/u/${options.username}.json`, data, options, cb);\n    }\n}\n\nmodule.exports = User\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvQWRtaW4uanMiLCJsaWIvQ2F0ZWdvcnkuanMiLCJsaWIvRGlzY291cnNlLmpzIiwibGliL1Bvc3QuanMiLCJsaWIvUmVxdWVzdGFibGUuanMiLCJsaWIvVG9waWMuanMiLCJsaWIvVXNlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztNQ0VNLEs7Ozs7O0FBRUosbUJBQVksSUFBWixFQUFrQixPQUFsQixFQUEyQjtBQUFBOztBQUFBLCtCQUNuQixJQURtQixFQUNiLE9BRGE7QUFFMUI7QUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7MkNBQytCLE8sRUFBUyxFLEVBQUk7QUFBQSxZQUF6QixRQUF5QixRQUF6QixRQUF5QjtBQUV4QyxZQUFNLElBQUksR0FBRztBQUFFLFVBQUEsR0FBRyxFQUFFO0FBQUUsWUFBQSxRQUFRLEVBQVI7QUFBRjtBQUFQLFNBQWI7QUFFQSxlQUFPLEtBQUssUUFBTCxDQUFjLE1BQWQsRUFBc0IsaUJBQXRCLEVBQXlDLElBQXpDLEVBQStDLE9BQS9DLEVBQXdELEVBQXhELENBQVA7QUFFRDs7OztJQW5CaUIsd0I7O0FBdUJwQixFQUFBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLEtBQWpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01DdkJNLFE7Ozs7O0FBRUYsc0JBQVksSUFBWixFQUFrQixPQUFsQixFQUEy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IjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgUmVxdWVzdGFibGUgZnJvbSAnLi9SZXF1ZXN0YWJsZSc7XG5cbmNsYXNzIEFkbWluIGV4dGVuZHMgUmVxdWVzdGFibGUge1xuXG4gIGNvbnN0cnVjdG9yKGF1dGgsIGFwaUJhc2UpIHtcbiAgICBzdXBlcihhdXRoLCBhcGlCYXNlKVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIEFwaSBrZXkgZm9yIHVzZXJcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvYmplY3RdIFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29iamVjdC51c2VybmFtZSBdXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cbiAgZ2VuZXJhdGVBcGlLZXkoeyB1c2VybmFtZSB9LCBvcHRpb25zLCBjYikge1xuXG4gICAgY29uc3QgZGF0YSA9IHsga2V5OiB7IHVzZXJuYW1lIH0gfTtcblxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdQT1NUJywgJy9hZG1pbi9hcGkva2V5cycsIGRhdGEsIG9wdGlvbnMsIGNiKTtcblxuICB9O1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQWRtaW4iLCJpbXBvcnQgUmVxdWVzdGFibGUgZnJvbSAnLi9SZXF1ZXN0YWJsZSc7XG5cbmNsYXNzIENhdGVnb3J5IGV4dGVuZHMgUmVxdWVzdGFibGUge1xuXG4gICAgY29uc3RydWN0b3IoYXV0aCwgYXBpQmFzZSkge1xuICAgICAgICBzdXBlcihhdXRoLCBhcGlCYXNlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2F0ZWdvcmllc1xuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG4gICAgZ2V0QWxsKG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCAnL2NhdGVnb3JpZXMuanNvbicsIG51bGwsIG9wdGlvbnMsIGNiKTtcbiAgICB9O1xuXG4gICAgIC8qKlxuICAgICAqIEdldCBhbGwgdG9waWNzIHJlbGF0ZWQgd2l0aCBjYXRlZ29yeVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG4gICAgZ2V0VG9waWNzKGNhdGVnb3J5SWQsIG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCBgL2MvJHtjYXRlZ29yeUlkfS5qc29uYCwgbnVsbCwgb3B0aW9ucywgY2IpO1xuICAgIH07XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYXRlZ29yeSIsIlxuaW1wb3J0IEFkbWluIGZyb20gJy4vQWRtaW4nO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi9Vc2VyJztcbmltcG9ydCBQb3N0IGZyb20gJy4vUG9zdCc7XG5pbXBvcnQgVG9waWMgZnJvbSAnLi9Ub3BpYyc7XG5pbXBvcnQgQ2F0ZWdvcnkgZnJvbSAnLi9DYXRlZ29yeSc7XG5cbmNsYXNzIERpc2NvdXJzZSB7XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBEaXNjb3Vyc2UuXG4gICAgKiBAcGFyYW0ge1JlcXVlc3RhYmxlLmF1dGh9IFthdXRoXSAtIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgdG8gRGlzY291cnNlLlxuICAgICogQHBhcmFtIHtzdHJpbmd9IFthcGlCYXNlXSAtIHRoZSBiYXNlIERpc2NvdXJzZSBBUEkgVVJMXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBhcGlCYXNlKSB7XG4gICAgICAgIHRoaXMuX19hcGlCYXNlID0gYXBpQmFzZTtcbiAgICAgICAgdGhpcy5fX2F1dGggPSBhdXRoIHx8IHt9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICogQ3JlYXRlIGEgbmV3IEFkbWluIHdyYXBwZXJcbiAgICAqIEByZXR1cm4ge0FkbWlufVxuICAgICovXG4gICAgZ2V0QWRtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWRtaW4odGhpcy5fX2F1dGgsIHRoaXMuX19hcGlCYXNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBVc2VyIHdyYXBwZXJcbiAgICAqIEByZXR1cm4ge1VzZXJ9XG4gICAgKi9cbiAgICBnZXRVc2VyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXIodGhpcy5fX2F1dGgsIHRoaXMuX19hcGlCYXNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBQb3N0IHdyYXBwZXJcbiAgICAqIEByZXR1cm4ge1Bvc3R9XG4gICAgKi9cbiAgICBnZXRQb3N0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFBvc3QodGhpcy5fX2F1dGgsIHRoaXMuX19hcGlCYXNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBUb3BpYyB3cmFwcGVyXG4gICAgKiBAcmV0dXJuIHtUb3BpY31cbiAgICAqL1xuICAgIGdldFRvcGljKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRvcGljKHRoaXMuX19hdXRoLCB0aGlzLl9fYXBpQmFzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IENhdGVnb3J5IHdyYXBwZXJcbiAgICAgKiBAcmV0dXJuIHtDYXRlZ29yeX1cbiAgICAgKi9cbiAgICBnZXRDYXRlZ29yeSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeSh0aGlzLl9fYXV0aCwgdGhpcy5fX2FwaUJhc2UpO1xuICAgIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IERpc2NvdXJzZSIsImltcG9ydCBSZXF1ZXN0YWJsZSBmcm9tICcuL1JlcXVlc3RhYmxlJztcblxuY2xhc3MgUG9zdCBleHRlbmRzIFJlcXVlc3RhYmxlIHtcblxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGFwaUJhc2UpIHtcbiAgICAgICAgc3VwZXIoYXV0aCwgYXBpQmFzZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgc2luZ2xlIHBvc3RzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaWRdIFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG4gICAgZ2V0T25lKGlkLCBvcHRpb25zLCBjYikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnR0VUJywgYC9wb3N0cy8ke2lkfS5qc29uYCwgbnVsbCwgb3B0aW9ucywgY2IpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGF0ZXN0IHBvc3RzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb2JqZWN0XSBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29iamVjdC51c2VybmFtZSBdXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKi9cbiAgICBnZXRMYXRlc3Qob3B0aW9ucywgY2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ0dFVCcsICcvcG9zdHMuanNvbicsIG51bGwsIG9wdGlvbnMsIGNiKTtcbiAgICB9O1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gUG9zdCIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbi8qKlxuICogVGhlIGVycm9yIHN0cnVjdHVyZSByZXR1cm5lZCB3aGVuIGEgbmV0d29yayBjYWxsIGZhaWxzXG4gKi9cbmNsYXNzIFJlc3BvbnNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAvKipcbiAgICAqIENvbnN0cnVjdCBhIG5ldyBSZXNwb25zZUVycm9yXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIGFuIG1lc3NhZ2UgdG8gcmV0dXJuIGluc3RlYWQgb2YgdGhlIHRoZSBkZWZhdWx0IGVycm9yIG1lc3NhZ2VcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gdGhlIHJlcXVlc3RlZCBwYXRoXG4gICAgKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2UgLSB0aGUgb2JqZWN0IHJldHVybmVkIGJ5IEF4aW9zXG4gICAgKi9cbiAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHBhdGgsIHJlc3BvbnNlKSB7XG4gICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICB0aGlzLnJlcXVlc3QgPSByZXNwb25zZS5jb25maWc7XG4gICAgICB0aGlzLnJlc3BvbnNlID0gKHJlc3BvbnNlIHx8IHt9KS5yZXNwb25zZSB8fCByZXNwb25zZTtcbiAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgIH1cbn1cblxuLyoqXG4gKiBSZXF1ZXN0YWJsZSB3cmFwcyB0aGUgbG9naWMgZm9yIG1ha2luZyBodHRwIHJlcXVlc3RzIHRvIHRoZSBBUElcbiAqL1xuY2xhc3MgUmVxdWVzdGFibGUge1xuXG4gICAvKipcbiAgICAqIEluaXRpYWxpemUgdGhlIGh0dHAgaW50ZXJuYWxzLlxuICAgICogQHBhcmFtIHtSZXF1ZXN0YWJsZS5hdXRofSBbYXV0aF0gLSB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIHRvIGRpc2NvdXJzZS4gSWYgYXV0aCBpc1xuICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IHByb3ZpZGVkIHJlcXVlc3Qgd2lsbCBiZSBtYWRlIHVuYXV0aGVudGljYXRlZFxuICAgICogQHBhcmFtIHtzdHJpbmd9IFthcGlCYXNlPWh0dHBzOi8vYXBpLmRpc2NvdXJzZS5jb21dIC0gdGhlIGJhc2UgZGlzY291cnNlIEFQSSBVUkxcbiAgICAqL1xuICAgY29uc3RydWN0b3IoYXV0aCwgYXBpQmFzZSkge1xuICAgICAgdGhpcy5fX2FwaUJhc2UgPSBhcGlCYXNlXG4gICAgICB0aGlzLl9fYXV0aFN5c3RlbUhlYWRlciA9IHtcbiAgICAgICAgICdBcGktS2V5JzogYXV0aC5hcGlfa2V5LFxuICAgICAgICAgJ0FwaS1Vc2VybmFtZSc6IGF1dGguYXBpX3VzZXJuYW1lXG4gICAgICB9XG4gICB9XG5cbiAgIC8qKlxuICAgICogQ29tcHV0ZSB0aGUgVVJMIHRvIHVzZSB0byBtYWtlIGEgcmVxdWVzdC5cbiAgICAqIEBwcml2YXRlXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIGVpdGhlciBhIFVSTCByZWxhdGl2ZSB0byB0aGUgQVBJIGJhc2Ugb3IgYW4gYWJzb2x1dGUgVVJMXG4gICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gdGhlIFVSTCB0byB1c2VcbiAgICAqL1xuICAgX19nZXRVUkwocGF0aCkge1xuXG4gICAgICBjb25zdCB1cmwgPSB0aGlzLl9fYXBpQmFzZSArIHBhdGg7XG5cbiAgICAgIHJldHVybiB1cmxcbiAgIH1cblxuICAgLyoqXG4gICAgKiBDb21wdXRlIHRoZSBoZWFkZXJzIHJlcXVpcmVkIGZvciBhbiBBUEkgcmVxdWVzdC5cbiAgICAqIEBwcml2YXRlXG4gICAgKiBAcmV0dXJuIHtPYmplY3R9IC0gdGhlIGhlYWRlcnMgdG8gdXNlIGluIHRoZSByZXF1ZXN0XG4gICAgKi9cbiAgIF9fZ2V0UmVxdWVzdEhlYWRlcnMob3B0aW9ucykge1xuXG4gICAgICBsZXQgaGVhZGVycyA9IHtcbiAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH07XG5cbiAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAvLyBJZiBBdXRoIGlzIHN5c3RlbXxhZG1pbiB1c2VyXG4gICAgICAgICBpZiAob3B0aW9ucy5pc0FkbWluKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0geyAuLi5oZWFkZXJzLCAuLi50aGlzLl9fYXV0aFN5c3RlbUhlYWRlciB9O1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgICAgICB9XG5cbiAgICAgICAgIC8vIElmIGF1dGggd2l0aCB1c2VyIGNyZWRlbnRpYWxzXG4gICAgICAgICBpZiAob3B0aW9ucy51c2VybmFtZSAmJiBvcHRpb25zLmFwaUtleSkge1xuICAgICAgICAgICAgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgIC4uLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAnQXBpLUtleSc6IG9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgICAgJ0FwaS1Vc2VybmFtZSc6IG9wdGlvbnMudXNlcm5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICB9XG5cbiAgIC8qKlxuICAgICogTWFrZSBhIHJlcXVlc3QuXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIC0gdGhlIG1ldGhvZCBmb3IgdGhlIHJlcXVlc3QgKEdFVCwgUFVULCBQT1NULCBERUxFVEUpXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIHRoZSBwYXRoIGZvciB0aGUgcmVxdWVzdFxuICAgICogQHBhcmFtIHsqfSBbZGF0YV0gLSB0aGUgZGF0YSB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuIEZvciBIVFRQIG1ldGhvZHMgdGhhdCBkb24ndCBoYXZlIGEgYm9keSB0aGUgZGF0YVxuICAgICogICAgICAgICAgICAgICAgICAgd2lsbCBiZSBzZW50IGFzIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAqIEBwYXJhbSB7UmVxdWVzdGFibGUuY2FsbGJhY2t9IFtjYl0gLSB0aGUgY2FsbGJhY2sgZm9yIHRoZSByZXF1ZXN0XG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyYXc9ZmFsc2VdIC0gaWYgdGhlIHJlcXVlc3Qgc2hvdWxkIGJlIHNlbnQgYXMgcmF3LiBJZiB0aGlzIGlzIGEgZmFsc3kgdmFsdWUgdGhlbiB0aGVcbiAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCB3aWxsIGJlIG1hZGUgYXMgSlNPTlxuICAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgUHJvbWlzZSBmb3IgdGhlIGh0dHAgcmVxdWVzdFxuICAgICovXG4gICBhc3luYyBfcmVxdWVzdChtZXRob2QsIHBhdGgsIGRhdGEsIG9wdGlvbnMsIGNiKSB7XG5cbiAgICAgIGNvbnN0IHVybCA9IHRoaXMuX19nZXRVUkwocGF0aCk7XG5cbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLl9fZ2V0UmVxdWVzdEhlYWRlcnMob3B0aW9ucyk7XG5cbiAgICAgIGxldCBxdWVyeVBhcmFtcyA9IHt9O1xuXG4gICAgICBjb25zdCBzaG91bGRVc2VEYXRhQXNQYXJhbXMgPSBkYXRhICYmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpICYmIG1ldGhvZEhhc05vQm9keShtZXRob2QpO1xuXG4gICAgICBpZiAoc2hvdWxkVXNlRGF0YUFzUGFyYW1zKSB7XG4gICAgICAgICBxdWVyeVBhcmFtcyA9IGRhdGE7XG4gICAgICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbXMsXG4gICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicsXG4gICAgICB9O1xuXG4gICAgICB0cnkge1xuXG4gICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zKGNvbmZpZyk7XG5cbiAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmhhc093blByb3BlcnR5KCdlcnJvcnMnKSkge1xuXG4gICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPSA0MDA7XG5cbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gJ21lc3NhZ2UnIGluIHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgID8gcmVzcG9uc2UuZGF0YS5tZXNzYWdlXG4gICAgICAgICAgICAgICA6IEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEuZXJyb3JzKVxuXG4gICAgICAgICAgICBsZXQgZXJyb3IgPSBuZXcgUmVzcG9uc2VFcnJvcihlcnJvck1zZywgcGF0aCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAgICBjYihlcnJvcilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICAgICAgfVxuICAgICAgICAgfVxuXG4gICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhICYmIE9iamVjdC5rZXlzKHJlc3BvbnNlLmRhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgIC8vIFdoZW4gZGF0YSBoYXMgcmVzdWx0c1xuICAgICAgICAgICAgICAgY2IobnVsbCwgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjb25maWcubWV0aG9kICE9PSAnR0VUJyAmJiBPYmplY3Qua2V5cyhyZXNwb25zZS5kYXRhKS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAvLyBUcnVlIHdoZW4gc3VjY2Vzc2Z1bCBzdWJtaXQgYSByZXF1ZXN0IGFuZCByZWNlaXZlIGEgZW1wdHkgb2JqZWN0XG4gICAgICAgICAgICAgICBjYihudWxsLCAocmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgIGNiKG51bGwsIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cblxuICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgIGlmICghZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGVycm9yID0gbmV3IFJlc3BvbnNlRXJyb3IoJ0Rpc2NvdXJzZSBhcGkgZXJyb3I6IFJlc3BvbnNlIGlzIHVuZGVmaW5lZCcsIHBhdGgsIHtzdGF0dXM6IDUwMH0pO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgIH1cblxuICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSAnbWVzc2FnZScgaW4gZXJyb3IucmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgPyBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2VcbiAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMpXG5cbiAgICAgICAgIGVycm9yID0gbmV3IFJlc3BvbnNlRXJyb3IoZXJyb3JNc2csIHBhdGgsIGVycm9yLnJlc3BvbnNlKTtcblxuICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICBjYihlcnJvcilcbiAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICAgfVxuICAgICAgfVxuICAgfVxuXG4gICAvKipcbiAgICAqIE1ha2UgYSByZXF1ZXN0IHRvIGFuIGVuZHBvaW50IHRoZSByZXR1cm5zIDIwNCB3aGVuIHRydWUgYW5kIDQwNCB3aGVuIGZhbHNlXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIHRoZSBwYXRoIHRvIHJlcXVlc3RcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIC0gYW55IHF1ZXJ5IHBhcmFtZXRlcnMgZm9yIHRoZSByZXF1ZXN0XG4gICAgKiBAcGFyYW0ge1JlcXVlc3RhYmxlLmNhbGxiYWNrfSBjYiAtIHRoZSBjYWxsYmFjayB0aGF0IHdpbGwgcmVjZWl2ZSBgdHJ1ZWAgb3IgYGZhbHNlYFxuICAgICogQHBhcmFtIHttZXRob2R9IFttZXRob2Q9R0VUXSAtIEhUVFAgTWV0aG9kIHRvIHVzZVxuICAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgcHJvbWlzZSBmb3IgdGhlIGh0dHAgcmVxdWVzdFxuICAgICovXG4gICBfcmVxdWVzdDIwNG9yNDA0KHBhdGgsIGRhdGEsIGNiLCBtZXRob2QgPSAnR0VUJykge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QobWV0aG9kLCBwYXRoLCBkYXRhKVxuICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAgICBjYihudWxsLCB0cnVlLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgIH0sIGZ1bmN0aW9uIGZhaWx1cmUocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAgICAgICBjYihudWxsLCBmYWxzZSwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICAgICAgIGNiKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IHJlc3BvbnNlO1xuICAgICAgICAgfSk7XG4gICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVxdWVzdGFibGU7XG5cbi8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIC8vXG4vLyAgUHJpdmF0ZSBoZWxwZXIgZnVuY3Rpb25zICAvL1xuLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gLy9cbmNvbnN0IE1FVEhPRFNfV0lUSF9OT19CT0RZID0gWydHRVQnLCAnSEVBRCcsICdERUxFVEUnXTtcblxuZnVuY3Rpb24gbWV0aG9kSGFzTm9Cb2R5KG1ldGhvZCkge1xuICAgcmV0dXJuIE1FVEhPRFNfV0lUSF9OT19CT0RZLmluZGV4T2YobWV0aG9kKSAhPT0gLTE7XG59XG5cbmZ1bmN0aW9uIGNhbGxiYWNrRXJyb3JPclRocm93KGNiLCBwYXRoKSB7XG4gICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlcihvYmplY3QpIHtcbiAgICAgIGxldCBlcnJvcjtcbiAgICAgIGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkoJ2NvbmZpZycpKSB7XG4gICAgICAgICBjb25zdCB7IHJlc3BvbnNlOiB7IHN0YXR1cywgc3RhdHVzVGV4dCB9LCBjb25maWc6IHsgbWV0aG9kLCB1cmwgfSB9ID0gb2JqZWN0O1xuICAgICAgICAgbGV0IG1lc3NhZ2UgPSAoYCR7c3RhdHVzfSBlcnJvciBtYWtpbmcgcmVxdWVzdCAke21ldGhvZH0gJHt1cmx9OiBcIiR7c3RhdHVzVGV4dH1cImApO1xuICAgICAgICAgZXJyb3IgPSBuZXcgUmVzcG9uc2VFcnJvcihtZXNzYWdlLCBwYXRoLCBvYmplY3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgIGVycm9yID0gb2JqZWN0O1xuICAgICAgfVxuICAgICAgaWYgKGNiKSB7XG4gICAgICAgICBjYihlcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICB9O1xufVxuIiwiaW1wb3J0IFJlcXVlc3RhYmxlIGZyb20gJy4vUmVxdWVzdGFibGUnO1xuXG5jbGFzcyBUb3BpYyBleHRlbmRzIFJlcXVlc3RhYmxlIHtcblxuICBjb25zdHJ1Y3RvcihhdXRoLCBhcGlCYXNlKSB7XG4gICAgc3VwZXIoYXV0aCwgYXBpQmFzZSlcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEdldCBzaW5nbGUgdG9waWNzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbaWRdXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cbiAgZ2V0T25lKGlkLCBvcHRpb25zLCBjYikge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCBgL3QvJHtpZH0uanNvbmAsIG51bGwsIG9wdGlvbnMsIGNiKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFsbCB0b3BpY3NcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuICBnZXRBbGwob3B0aW9ucywgY2IpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnR0VUJywgJy90b3BpY3MnLCBudWxsLCBvcHRpb25zLCBjYik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgdG9waWNzIGJ5IHVzZXJuYW1lLlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29iamVjdF1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvYmplY3QudXNlcm5hbWVdXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cbiAgZ2V0QnkoeyB1c2VybmFtZSB9LCBvcHRpb25zLCBjYikge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCBgL3RvcGljcy9jcmVhdGVkLWJ5LyR7dXNlcm5hbWV9Lmpzb25gLCBudWxsLCBvcHRpb25zLCBjYik7XG4gIH07XG5cblxuICAvKipcbiAgICogR2V0IGFsbCBsYXRlc3QgdG9waWNzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cbiAgZ2V0TGF0ZXN0KG9wdGlvbnMsIGNiKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ0dFVCcsICcvbGF0ZXN0Lmpzb24nLCBudWxsLCBvcHRpb25zLCBjYik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0b3BpY3xwb3N0fHBtXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb2JqZWN0XVxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG4gIGNyZWF0ZShkYXRhLCBvcHRpb25zLCBjYikge1xuXG4gICAgaWYgKCFkYXRhLnJhdykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYXcgaXMgcmVxdWlyZWQuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ1BPU1QnLCAnL3Bvc3RzLmpzb24nLCBkYXRhLCBvcHRpb25zLCBjYik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBwcml2YXRlIG1lc3NhZ2VzIGJ5IHVzZXJuYW1lXG4gICAqIEBwYXJhbSB1c2VybmFtZVxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKiBAcGFyYW0gY2JcbiAgICovXG4gIGdldFByaXZhdGVNZXNzYWdlcyh7dXNlcm5hbWV9LCBvcHRpb25zLCBjYikge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCBgL3RvcGljcy9wcml2YXRlLW1lc3NhZ2VzLyR7dXNlcm5hbWV9Lmpzb25gLCBudWxsLCBvcHRpb25zLCBjYilcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUb3BpY1xuIiwiaW1wb3J0IFJlcXVlc3RhYmxlIGZyb20gJy4vUmVxdWVzdGFibGUnO1xuXG5jbGFzcyBVc2VyIGV4dGVuZHMgUmVxdWVzdGFibGUge1xuXG4gICAgY29uc3RydWN0b3IoYXV0aCwgYXBpQmFzZSkge1xuICAgICAgICBzdXBlcihhdXRoLCBhcGlCYXNlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBuZXcgdXNlclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb2JqZWN0XVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0LnVzZXJuYW1lXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0LmVtYWlsXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0LnBhc3N3b3JkXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0Lm5hbWVdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb2JqZWN0LmFjdGl2ZV1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqL1xuICAgIGNyZWF0ZSh7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIG5hbWUsIGFjdGl2ZSB9LCBvcHRpb25zLCBjYikge1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgJ25hbWUnOiBuYW1lLFxuICAgICAgICAgICAgJ2VtYWlsJzogZW1haWwsXG4gICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcbiAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkLFxuICAgICAgICAgICAgJ2FjdGl2ZSc6IGFjdGl2ZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnUE9TVCcsICcvdXNlcnMnLCBkYXRhLCBvcHRpb25zLCBjYik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldCB1c2VyIGJ5IHVzZXJuYW1lXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvYmplY3RdXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvYmplY3QudXNlcm5hbWUgXVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG4gICAgZ2V0T25lKHt1c2VybmFtZX0sIG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCAnL3VzZXJzLycgKyB1c2VybmFtZSArICcuanNvbicsIG51bGwsIG9wdGlvbnMsIGNiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldCB1c2VyIGJ5IGlkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtpZF1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqL1xuICAgIGRlbGV0ZShpZCwgb3B0aW9ucywgY2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ0RFTEVURScsICcvYWRtaW4vdXNlcnMvJyArIGlkICsgJy5qc29uJywgbnVsbCwgb3B0aW9ucywgY2IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwcml2YXRlIG1lc3NhZ2UgYWNjZXNzXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIHVwZGF0ZVBNQWNjZXNzKGRhdGEsIG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdQVVQnLCBgL3UvJHtvcHRpb25zLnVzZXJuYW1lfS5qc29uYCwgZGF0YSwgb3B0aW9ucywgY2IpO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVc2VyXG4iXX0="}