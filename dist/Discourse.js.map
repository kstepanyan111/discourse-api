{"version":3,"sources":["node_modules/browser-pack/_prelude.js","lib/Admin.js","lib/Category.js","lib/Discourse.js","lib/Post.js","lib/Requestable.js","lib/Topic.js","lib/User.js"],"names":[],"mappings":"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","file":"Discourse.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import Requestable from './Requestable';\n\nclass Admin extends Requestable {\n\n  constructor(auth, apiBase) {\n    super(auth, apiBase)\n  }\n\n  /**\n   * Generate Api key for user\n   * @param {object} [object] \n   * @param {string} [object.username ]\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  generateApiKey({ username }, options, cb) {\n\n    const data = { key: { username } };\n\n    return this._request('POST', '/admin/api/keys', data, options, cb);\n\n  };\n\n}\n\nmodule.exports = Admin","import Requestable from './Requestable';\n\nclass Category extends Requestable {\n\n    constructor(auth, apiBase) {\n        super(auth, apiBase)\n    }\n\n    /**\n     * Get all categories\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getAll(options, cb) {\n        return this._request('GET', '/categories.json', null, options, cb);\n    };\n\n     /**\n     * Get all topics related with category\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getTopics(categoryId, options, cb) {\n        return this._request('GET', `/c/${categoryId}.json`, null, options, cb);\n    };\n\n}\n\nmodule.exports = Category","\nimport Admin from './Admin';\nimport User from './User';\nimport Post from './Post';\nimport Topic from './Topic';\nimport Category from './Category';\n\nclass Discourse {\n\n    /**\n    * Create a new Discourse.\n    * @param {Requestable.auth} [auth] - the credentials to authenticate to Discourse.\n    * @param {string} [apiBase] - the base Discourse API URL\n    */\n    constructor(auth, apiBase) {\n        this.__apiBase = apiBase;\n        this.__auth = auth || {};\n    }\n\n    /**\n    * Create a new Admin wrapper\n    * @return {Admin}\n    */\n    getAdmin() {\n        return new Admin(this.__auth, this.__apiBase);\n    }\n\n    /**\n    * Create a new User wrapper\n    * @return {User}\n    */\n    getUser() {\n        return new User(this.__auth, this.__apiBase);\n    }\n\n    /**\n    * Create a new Post wrapper\n    * @return {Post}\n    */\n    getPost() {\n        return new Post(this.__auth, this.__apiBase);\n    }\n\n    /**\n    * Create a new Topic wrapper\n    * @return {Topic}\n    */\n    getTopic() {\n        return new Topic(this.__auth, this.__apiBase);\n    }\n\n    /**\n     * Create a new Category wrapper\n     * @return {Category}\n     */\n    getCategory() {\n        return new Category(this.__auth, this.__apiBase);\n    }\n\n}\n\nmodule.exports = Discourse","import Requestable from './Requestable';\n\nclass Post extends Requestable {\n\n    constructor(auth, apiBase) {\n        super(auth, apiBase)\n    }\n\n    /**\n     * Get single posts.\n     * @param {number} [id] \n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getOne(id, options, cb) {\n        return this._request('GET', `/posts/${id}.json`, null, options, cb);\n    };\n\n    /**\n     * Get latest posts.\n     * @param {object} [object] \n     * @param {string} [object.username ]\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getLatest(options, cb) {\n        return this._request('GET', '/posts.json', null, options, cb);\n    };\n\n}\n\nmodule.exports = Post","import axios from 'axios';\n\n/**\n * The error structure returned when a network call fails\n */\nclass ResponseError extends Error {\n   /**\n    * Construct a new ResponseError\n    * @param {string} message - an message to return instead of the the default error message\n    * @param {string} path - the requested path\n    * @param {Object} response - the object returned by Axios\n    */\n   constructor(message, path, response) {\n      super(message);\n      this.path = path;\n      this.request = response.config;\n      this.response = (response || {}).response || response;\n      this.statusCode = response.status;\n   }\n}\n\n/**\n * Requestable wraps the logic for making http requests to the API\n */\nclass Requestable {\n\n   /**\n    * Initialize the http internals.\n    * @param {Requestable.auth} [auth] - the credentials to authenticate to discourse. If auth is\n    *                                  not provided request will be made unauthenticated\n    * @param {string} [apiBase=https://api.discourse.com] - the base discourse API URL\n    */\n   constructor(auth, apiBase) {\n      this.__apiBase = apiBase\n      this.__authSystemHeader = {\n         'Api-Key': auth.api_key,\n         'Api-Username': auth.api_username\n      }\n   }\n\n   /**\n    * Compute the URL to use to make a request.\n    * @private\n    * @param {string} path - either a URL relative to the API base or an absolute URL\n    * @return {string} - the URL to use\n    */\n   __getURL(path) {\n\n      const url = this.__apiBase + path;\n\n      return url\n   }\n\n   /**\n    * Compute the headers required for an API request.\n    * @private\n    * @return {Object} - the headers to use in the request\n    */\n   __getRequestHeaders(options) {\n\n      let headers = {\n         'Content-Type': 'application/json;charset=UTF-8',\n         'Accept': 'application/json'\n      };\n\n      if (options) {\n         // If Auth is system|admin user\n         if (options.isAdmin) {\n            headers = { ...headers, ...this.__authSystemHeader };\n            return headers;\n         }\n\n         // If auth with user credentials\n         if (options.username && options.apiKey) {\n            headers = {\n               ...headers,\n               'Api-Key': options.apiKey,\n               'Api-Username': options.username\n            }\n         }\n      }\n\n      return headers;\n   }\n\n   /**\n    * Make a request.\n    * @param {string} method - the method for the request (GET, PUT, POST, DELETE)\n    * @param {string} path - the path for the request\n    * @param {*} [data] - the data to send to the server. For HTTP methods that don't have a body the data\n    *                   will be sent as query parameters\n    * @param {Requestable.callback} [cb] - the callback for the request\n    * @param {boolean} [raw=false] - if the request should be sent as raw. If this is a falsy value then the\n    *                              request will be made as JSON\n    * @return {Promise} - the Promise for the http request\n    */\n   async _request(method, path, data, options, cb) {\n\n      const url = this.__getURL(path);\n      const headers = this.__getRequestHeaders(options);\n\n      let queryParams = {};\n\n      const shouldUseDataAsParams = data && (typeof data === 'object') && methodHasNoBody(method);\n\n      if (shouldUseDataAsParams) {\n         queryParams = data;\n         data = undefined;\n      }\n\n      const config = {\n         url: url,\n         method: method,\n         headers: headers,\n         params: queryParams,\n         data: data,\n         responseType: 'json',\n      };\n\n      try {\n\n         const response = await axios(config);\n\n         if (response.data.hasOwnProperty('errors')) {\n            \n            response.status = 400;\n\n            const errorMsg = 'message' in response.data\n               ? response.data.message\n               : JSON.stringify(response.data.errors)\n\n            let error = new ResponseError(errorMsg, path, response);\n            if (cb) {\n               cb(error)\n            } else {\n               throw error\n            }\n         }\n\n         if (cb) {\n            if (response.data && Object.keys(response.data).length > 0) {\n               // When data has results\n               cb(null, response.data, response);\n            } else if (config.method !== 'GET' && Object.keys(response.data).length < 1) {\n               // True when successful submit a request and receive a empty object\n               cb(null, (response.status < 300), response);\n            } else {\n               cb(null, response.data, response);\n            }\n         }\n\n\n         return response\n\n      } catch (error) {\n\n         const errorMsg = 'message' in error.response.data\n            ? error.response.data.message\n            : JSON.stringify(error.response.data.errors)\n\n         error = new ResponseError(errorMsg, path, error.response);\n\n         if (cb) {\n            cb(error)\n         } else {\n            throw error\n         }\n      }\n   }\n\n   /**\n    * Make a request to an endpoint the returns 204 when true and 404 when false\n    * @param {string} path - the path to request\n    * @param {Object} data - any query parameters for the request\n    * @param {Requestable.callback} cb - the callback that will receive `true` or `false`\n    * @param {method} [method=GET] - HTTP Method to use\n    * @return {Promise} - the promise for the http request\n    */\n   _request204or404(path, data, cb, method = 'GET') {\n      return this._request(method, path, data)\n         .then(function success(response) {\n            if (cb) {\n               cb(null, true, response);\n            }\n            return true;\n         }, function failure(response) {\n            if (response.response.status === 404) {\n               if (cb) {\n                  cb(null, false, response);\n               }\n               return false;\n            }\n\n            if (cb) {\n               cb(response);\n            }\n            throw response;\n         });\n   }\n}\n\nmodule.exports = Requestable;\n\n// ////////////////////////// //\n//  Private helper functions  //\n// ////////////////////////// //\nconst METHODS_WITH_NO_BODY = ['GET', 'HEAD', 'DELETE'];\n\nfunction methodHasNoBody(method) {\n   return METHODS_WITH_NO_BODY.indexOf(method) !== -1;\n}\n\nfunction callbackErrorOrThrow(cb, path) {\n   return function handler(object) {\n      let error;\n      if (object.hasOwnProperty('config')) {\n         const { response: { status, statusText }, config: { method, url } } = object;\n         let message = (`${status} error making request ${method} ${url}: \"${statusText}\"`);\n         error = new ResponseError(message, path, object);\n      } else {\n         error = object;\n      }\n      if (cb) {\n         cb(error);\n      } else {\n         throw error;\n      }\n   };\n}\n","import Requestable from './Requestable';\n\nclass Topic extends Requestable {\n\n  constructor(auth, apiBase) {\n    super(auth, apiBase)\n  }\n\n\n  /**\n   * Get single topics\n   * @param {number} [id]\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  getOne(id, options, cb) {\n    return this._request('GET', `/t/${id}.json`, null, options, cb);\n  };\n\n  /**\n   * Get all topics\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  getAll(options, cb) {\n    return this._request('GET', '/topics', null, options, cb);\n  };\n\n  /**\n   * Get all topics by username.\n   * @param {object} [object]\n   * @param {string} [object.username]\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  getBy({ username }, options, cb) {\n    return this._request('GET', `/topics/created-by/${username}.json`, null, options, cb);\n  };\n\n\n  /**\n   * Get all latest topics\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  getLatest(options, cb) {\n    return this._request('GET', '/latest.json', null, options, cb);\n  };\n\n  /**\n   * Create topic|post|pm\n   * @param {object} [object]\n   * @param {object} [options]\n   * @param {Function} [cb]\n   */\n  create(data, options, cb) {\n\n    if (!data.raw) {\n      throw new Error('Raw is required.');\n    }\n\n    return this._request('POST', '/posts.json', data, options, cb);\n  };\n\n}\n\nmodule.exports = Topic","import Requestable from './Requestable';\n\nclass User extends Requestable {\n\n    constructor(auth, apiBase) {\n        super(auth, apiBase)\n    }\n\n    /**\n     * Create new user\n     * @param {object} [object] \n     * @param {string} [object.username]\n     * @param {string} [object.email]\n     * @param {string} [object.password]\n     * @param {string} [object.name]\n     * @param {boolean} [object.active]\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    create({ username, email, password, name, active }, options, cb) {\n        const data = {\n            'name': name,\n            'email': email,\n            'username': username,\n            'password': password,\n            'active': active\n        };\n        return this._request('POST', '/users', data, options, cb);\n    };\n\n    /**\n     * Get user by username\n     * @param {object} [object] \n     * @param {string} [object.username ]\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    getOne({username}, options, cb) {\n        return this._request('GET', '/users/' + username + '.json', null, options, cb);\n    }\n\n    /**\n     * Delet user by id\n     * @param {number} [id]\n     * @param {object} [options]\n     * @param {Function} [cb]\n     */\n    delete(id, options, cb) {\n        return this._request('DELETE', '/admin/users/' + id + '.json', null, options, cb);\n    }\n\n}\n\nmodule.exports = User"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvQWRtaW4uanMiLCJsaWIvQ2F0ZWdvcnkuanMiLCJsaWIvRGlzY291cnNlLmpzIiwibGliL1Bvc3QuanMiLCJsaWIvUmVxdWVzdGFibGUuanMiLCJsaWIvVG9waWMuanMiLCJsaWIvVXNlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztNQ0VNLEs7Ozs7O0FBRUosbUJBQVksSUFBWixFQUFrQixPQUFsQixFQUEyQjtBQUFBOztBQUFBLCtCQUNuQixJQURtQixFQUNiLE9BRGE7QUFFMUI7QUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7MkNBQytCLE8sRUFBUyxFLEVBQUk7QUFBQSxZQUF6QixRQUF5QixRQUF6QixRQUF5QjtBQUV4QyxZQUFNLElBQUksR0FBRztBQUFFLFVBQUEsR0FBRyxFQUFFO0FBQUUsWUFBQSxRQUFRLEVBQVI7QUFBRjtBQUFQLFNBQWI7QUFFQSxlQUFPLEtBQUssUUFBTCxDQUFjLE1BQWQsRUFBc0IsaUJBQXRCLEVBQXlDLElBQXpDLEVBQStDLE9BQS9DLEVBQXdELEVBQXhELENBQVA7QUFFRDs7OztJQW5CaUIsd0I7O0FBdUJwQixFQUFBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLEtBQWpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01DdkJNLFE7Ozs7O0FBRUYsc0JBQVksSUFBWixFQUFrQixPQUFsQixFQUEy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QkFBUSxJQURDO0FBRVQsbUJBQVMsS0FGQTtBQUdULHNCQUFZLFFBSEg7QUFJVCxzQkFBWSxRQUpIO0FBS1Qsb0JBQVU7QUFMRCxTQUFiO0FBT0EsZUFBTyxLQUFLLFFBQUwsQ0FBYyxNQUFkLEVBQXNCLFFBQXRCLEVBQWdDLElBQWhDLEVBQXNDLE9BQXRDLEVBQStDLEVBQS9DLENBQVA7QUFDSDs7O29DQVNrQixPLEVBQVMsRSxFQUFJO0FBQUEsWUFBeEIsUUFBd0IsU0FBeEIsUUFBd0I7QUFDNUIsZUFBTyxLQUFLLFFBQUwsQ0FBYyxLQUFkLEVBQXFCLFlBQVksUUFBWixHQUF1QixPQUE1QyxFQUFxRCxJQUFyRCxFQUEyRCxPQUEzRCxFQUFvRSxFQUFwRSxDQUFQO0FBQ0g7Ozs4QkFRTSxFLEVBQUksTyxFQUFTLEUsRUFBSTtBQUNwQixlQUFPLEtBQUssUUFBTCxDQUFjLFFBQWQsRUFBd0Isa0JBQWtCLEVBQWxCLEdBQXVCLE9BQS9DLEVBQXdELElBQXhELEVBQThELE9BQTlELEVBQXVFLEVBQXZFLENBQVA7QUFDSDs7OztJQS9DYyx3Qjs7QUFtRG5CLEVBQUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsSUFBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgUmVxdWVzdGFibGUgZnJvbSAnLi9SZXF1ZXN0YWJsZSc7XG5cbmNsYXNzIEFkbWluIGV4dGVuZHMgUmVxdWVzdGFibGUge1xuXG4gIGNvbnN0cnVjdG9yKGF1dGgsIGFwaUJhc2UpIHtcbiAgICBzdXBlcihhdXRoLCBhcGlCYXNlKVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIEFwaSBrZXkgZm9yIHVzZXJcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvYmplY3RdIFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29iamVjdC51c2VybmFtZSBdXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cbiAgZ2VuZXJhdGVBcGlLZXkoeyB1c2VybmFtZSB9LCBvcHRpb25zLCBjYikge1xuXG4gICAgY29uc3QgZGF0YSA9IHsga2V5OiB7IHVzZXJuYW1lIH0gfTtcblxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdQT1NUJywgJy9hZG1pbi9hcGkva2V5cycsIGRhdGEsIG9wdGlvbnMsIGNiKTtcblxuICB9O1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQWRtaW4iLCJpbXBvcnQgUmVxdWVzdGFibGUgZnJvbSAnLi9SZXF1ZXN0YWJsZSc7XG5cbmNsYXNzIENhdGVnb3J5IGV4dGVuZHMgUmVxdWVzdGFibGUge1xuXG4gICAgY29uc3RydWN0b3IoYXV0aCwgYXBpQmFzZSkge1xuICAgICAgICBzdXBlcihhdXRoLCBhcGlCYXNlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2F0ZWdvcmllc1xuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG4gICAgZ2V0QWxsKG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCAnL2NhdGVnb3JpZXMuanNvbicsIG51bGwsIG9wdGlvbnMsIGNiKTtcbiAgICB9O1xuXG4gICAgIC8qKlxuICAgICAqIEdldCBhbGwgdG9waWNzIHJlbGF0ZWQgd2l0aCBjYXRlZ29yeVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG4gICAgZ2V0VG9waWNzKGNhdGVnb3J5SWQsIG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCBgL2MvJHtjYXRlZ29yeUlkfS5qc29uYCwgbnVsbCwgb3B0aW9ucywgY2IpO1xuICAgIH07XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYXRlZ29yeSIsIlxuaW1wb3J0IEFkbWluIGZyb20gJy4vQWRtaW4nO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi9Vc2VyJztcbmltcG9ydCBQb3N0IGZyb20gJy4vUG9zdCc7XG5pbXBvcnQgVG9waWMgZnJvbSAnLi9Ub3BpYyc7XG5pbXBvcnQgQ2F0ZWdvcnkgZnJvbSAnLi9DYXRlZ29yeSc7XG5cbmNsYXNzIERpc2NvdXJzZSB7XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBEaXNjb3Vyc2UuXG4gICAgKiBAcGFyYW0ge1JlcXVlc3RhYmxlLmF1dGh9IFthdXRoXSAtIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgdG8gRGlzY291cnNlLlxuICAgICogQHBhcmFtIHtzdHJpbmd9IFthcGlCYXNlXSAtIHRoZSBiYXNlIERpc2NvdXJzZSBBUEkgVVJMXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBhcGlCYXNlKSB7XG4gICAgICAgIHRoaXMuX19hcGlCYXNlID0gYXBpQmFzZTtcbiAgICAgICAgdGhpcy5fX2F1dGggPSBhdXRoIHx8IHt9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICogQ3JlYXRlIGEgbmV3IEFkbWluIHdyYXBwZXJcbiAgICAqIEByZXR1cm4ge0FkbWlufVxuICAgICovXG4gICAgZ2V0QWRtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWRtaW4odGhpcy5fX2F1dGgsIHRoaXMuX19hcGlCYXNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBVc2VyIHdyYXBwZXJcbiAgICAqIEByZXR1cm4ge1VzZXJ9XG4gICAgKi9cbiAgICBnZXRVc2VyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXIodGhpcy5fX2F1dGgsIHRoaXMuX19hcGlCYXNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBQb3N0IHdyYXBwZXJcbiAgICAqIEByZXR1cm4ge1Bvc3R9XG4gICAgKi9cbiAgICBnZXRQb3N0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFBvc3QodGhpcy5fX2F1dGgsIHRoaXMuX19hcGlCYXNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBUb3BpYyB3cmFwcGVyXG4gICAgKiBAcmV0dXJuIHtUb3BpY31cbiAgICAqL1xuICAgIGdldFRvcGljKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRvcGljKHRoaXMuX19hdXRoLCB0aGlzLl9fYXBpQmFzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IENhdGVnb3J5IHdyYXBwZXJcbiAgICAgKiBAcmV0dXJuIHtDYXRlZ29yeX1cbiAgICAgKi9cbiAgICBnZXRDYXRlZ29yeSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeSh0aGlzLl9fYXV0aCwgdGhpcy5fX2FwaUJhc2UpO1xuICAgIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IERpc2NvdXJzZSIsImltcG9ydCBSZXF1ZXN0YWJsZSBmcm9tICcuL1JlcXVlc3RhYmxlJztcblxuY2xhc3MgUG9zdCBleHRlbmRzIFJlcXVlc3RhYmxlIHtcblxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGFwaUJhc2UpIHtcbiAgICAgICAgc3VwZXIoYXV0aCwgYXBpQmFzZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgc2luZ2xlIHBvc3RzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaWRdIFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG4gICAgZ2V0T25lKGlkLCBvcHRpb25zLCBjYikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnR0VUJywgYC9wb3N0cy8ke2lkfS5qc29uYCwgbnVsbCwgb3B0aW9ucywgY2IpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGF0ZXN0IHBvc3RzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb2JqZWN0XSBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29iamVjdC51c2VybmFtZSBdXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKi9cbiAgICBnZXRMYXRlc3Qob3B0aW9ucywgY2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ0dFVCcsICcvcG9zdHMuanNvbicsIG51bGwsIG9wdGlvbnMsIGNiKTtcbiAgICB9O1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gUG9zdCIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbi8qKlxuICogVGhlIGVycm9yIHN0cnVjdHVyZSByZXR1cm5lZCB3aGVuIGEgbmV0d29yayBjYWxsIGZhaWxzXG4gKi9cbmNsYXNzIFJlc3BvbnNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAvKipcbiAgICAqIENvbnN0cnVjdCBhIG5ldyBSZXNwb25zZUVycm9yXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIGFuIG1lc3NhZ2UgdG8gcmV0dXJuIGluc3RlYWQgb2YgdGhlIHRoZSBkZWZhdWx0IGVycm9yIG1lc3NhZ2VcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gdGhlIHJlcXVlc3RlZCBwYXRoXG4gICAgKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2UgLSB0aGUgb2JqZWN0IHJldHVybmVkIGJ5IEF4aW9zXG4gICAgKi9cbiAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHBhdGgsIHJlc3BvbnNlKSB7XG4gICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICB0aGlzLnJlcXVlc3QgPSByZXNwb25zZS5jb25maWc7XG4gICAgICB0aGlzLnJlc3BvbnNlID0gKHJlc3BvbnNlIHx8IHt9KS5yZXNwb25zZSB8fCByZXNwb25zZTtcbiAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgIH1cbn1cblxuLyoqXG4gKiBSZXF1ZXN0YWJsZSB3cmFwcyB0aGUgbG9naWMgZm9yIG1ha2luZyBodHRwIHJlcXVlc3RzIHRvIHRoZSBBUElcbiAqL1xuY2xhc3MgUmVxdWVzdGFibGUge1xuXG4gICAvKipcbiAgICAqIEluaXRpYWxpemUgdGhlIGh0dHAgaW50ZXJuYWxzLlxuICAgICogQHBhcmFtIHtSZXF1ZXN0YWJsZS5hdXRofSBbYXV0aF0gLSB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIHRvIGRpc2NvdXJzZS4gSWYgYXV0aCBpc1xuICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IHByb3ZpZGVkIHJlcXVlc3Qgd2lsbCBiZSBtYWRlIHVuYXV0aGVudGljYXRlZFxuICAgICogQHBhcmFtIHtzdHJpbmd9IFthcGlCYXNlPWh0dHBzOi8vYXBpLmRpc2NvdXJzZS5jb21dIC0gdGhlIGJhc2UgZGlzY291cnNlIEFQSSBVUkxcbiAgICAqL1xuICAgY29uc3RydWN0b3IoYXV0aCwgYXBpQmFzZSkge1xuICAgICAgdGhpcy5fX2FwaUJhc2UgPSBhcGlCYXNlXG4gICAgICB0aGlzLl9fYXV0aFN5c3RlbUhlYWRlciA9IHtcbiAgICAgICAgICdBcGktS2V5JzogYXV0aC5hcGlfa2V5LFxuICAgICAgICAgJ0FwaS1Vc2VybmFtZSc6IGF1dGguYXBpX3VzZXJuYW1lXG4gICAgICB9XG4gICB9XG5cbiAgIC8qKlxuICAgICogQ29tcHV0ZSB0aGUgVVJMIHRvIHVzZSB0byBtYWtlIGEgcmVxdWVzdC5cbiAgICAqIEBwcml2YXRlXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIGVpdGhlciBhIFVSTCByZWxhdGl2ZSB0byB0aGUgQVBJIGJhc2Ugb3IgYW4gYWJzb2x1dGUgVVJMXG4gICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gdGhlIFVSTCB0byB1c2VcbiAgICAqL1xuICAgX19nZXRVUkwocGF0aCkge1xuXG4gICAgICBjb25zdCB1cmwgPSB0aGlzLl9fYXBpQmFzZSArIHBhdGg7XG5cbiAgICAgIHJldHVybiB1cmxcbiAgIH1cblxuICAgLyoqXG4gICAgKiBDb21wdXRlIHRoZSBoZWFkZXJzIHJlcXVpcmVkIGZvciBhbiBBUEkgcmVxdWVzdC5cbiAgICAqIEBwcml2YXRlXG4gICAgKiBAcmV0dXJuIHtPYmplY3R9IC0gdGhlIGhlYWRlcnMgdG8gdXNlIGluIHRoZSByZXF1ZXN0XG4gICAgKi9cbiAgIF9fZ2V0UmVxdWVzdEhlYWRlcnMob3B0aW9ucykge1xuXG4gICAgICBsZXQgaGVhZGVycyA9IHtcbiAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH07XG5cbiAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAvLyBJZiBBdXRoIGlzIHN5c3RlbXxhZG1pbiB1c2VyXG4gICAgICAgICBpZiAob3B0aW9ucy5pc0FkbWluKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0geyAuLi5oZWFkZXJzLCAuLi50aGlzLl9fYXV0aFN5c3RlbUhlYWRlciB9O1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgICAgICB9XG5cbiAgICAgICAgIC8vIElmIGF1dGggd2l0aCB1c2VyIGNyZWRlbnRpYWxzXG4gICAgICAgICBpZiAob3B0aW9ucy51c2VybmFtZSAmJiBvcHRpb25zLmFwaUtleSkge1xuICAgICAgICAgICAgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgIC4uLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAnQXBpLUtleSc6IG9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgICAgJ0FwaS1Vc2VybmFtZSc6IG9wdGlvbnMudXNlcm5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICB9XG5cbiAgIC8qKlxuICAgICogTWFrZSBhIHJlcXVlc3QuXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIC0gdGhlIG1ldGhvZCBmb3IgdGhlIHJlcXVlc3QgKEdFVCwgUFVULCBQT1NULCBERUxFVEUpXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIHRoZSBwYXRoIGZvciB0aGUgcmVxdWVzdFxuICAgICogQHBhcmFtIHsqfSBbZGF0YV0gLSB0aGUgZGF0YSB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuIEZvciBIVFRQIG1ldGhvZHMgdGhhdCBkb24ndCBoYXZlIGEgYm9keSB0aGUgZGF0YVxuICAgICogICAgICAgICAgICAgICAgICAgd2lsbCBiZSBzZW50IGFzIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAqIEBwYXJhbSB7UmVxdWVzdGFibGUuY2FsbGJhY2t9IFtjYl0gLSB0aGUgY2FsbGJhY2sgZm9yIHRoZSByZXF1ZXN0XG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyYXc9ZmFsc2VdIC0gaWYgdGhlIHJlcXVlc3Qgc2hvdWxkIGJlIHNlbnQgYXMgcmF3LiBJZiB0aGlzIGlzIGEgZmFsc3kgdmFsdWUgdGhlbiB0aGVcbiAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCB3aWxsIGJlIG1hZGUgYXMgSlNPTlxuICAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgUHJvbWlzZSBmb3IgdGhlIGh0dHAgcmVxdWVzdFxuICAgICovXG4gICBhc3luYyBfcmVxdWVzdChtZXRob2QsIHBhdGgsIGRhdGEsIG9wdGlvbnMsIGNiKSB7XG5cbiAgICAgIGNvbnN0IHVybCA9IHRoaXMuX19nZXRVUkwocGF0aCk7XG4gICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5fX2dldFJlcXVlc3RIZWFkZXJzKG9wdGlvbnMpO1xuXG4gICAgICBsZXQgcXVlcnlQYXJhbXMgPSB7fTtcblxuICAgICAgY29uc3Qgc2hvdWxkVXNlRGF0YUFzUGFyYW1zID0gZGF0YSAmJiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSAmJiBtZXRob2RIYXNOb0JvZHkobWV0aG9kKTtcblxuICAgICAgaWYgKHNob3VsZFVzZURhdGFBc1BhcmFtcykge1xuICAgICAgICAgcXVlcnlQYXJhbXMgPSBkYXRhO1xuICAgICAgICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1zLFxuICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nLFxuICAgICAgfTtcblxuICAgICAgdHJ5IHtcblxuICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcyhjb25maWcpO1xuXG4gICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5oYXNPd25Qcm9wZXJ0eSgnZXJyb3JzJykpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID0gNDAwO1xuXG4gICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9ICdtZXNzYWdlJyBpbiByZXNwb25zZS5kYXRhXG4gICAgICAgICAgICAgICA/IHJlc3BvbnNlLmRhdGEubWVzc2FnZVxuICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLmVycm9ycylcblxuICAgICAgICAgICAgbGV0IGVycm9yID0gbmV3IFJlc3BvbnNlRXJyb3IoZXJyb3JNc2csIHBhdGgsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgY2IoZXJyb3IpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cblxuICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiBPYmplY3Qua2V5cyhyZXNwb25zZS5kYXRhKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAvLyBXaGVuIGRhdGEgaGFzIHJlc3VsdHNcbiAgICAgICAgICAgICAgIGNiKG51bGwsIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm1ldGhvZCAhPT0gJ0dFVCcgJiYgT2JqZWN0LmtleXMocmVzcG9uc2UuZGF0YSkubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgLy8gVHJ1ZSB3aGVuIHN1Y2Nlc3NmdWwgc3VibWl0IGEgcmVxdWVzdCBhbmQgcmVjZWl2ZSBhIGVtcHR5IG9iamVjdFxuICAgICAgICAgICAgICAgY2IobnVsbCwgKHJlc3BvbnNlLnN0YXR1cyA8IDMwMCksIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICBjYihudWxsLCByZXNwb25zZS5kYXRhLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICB9XG5cblxuICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gJ21lc3NhZ2UnIGluIGVycm9yLnJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgID8gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlXG4gICAgICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzKVxuXG4gICAgICAgICBlcnJvciA9IG5ldyBSZXNwb25zZUVycm9yKGVycm9yTXNnLCBwYXRoLCBlcnJvci5yZXNwb25zZSk7XG5cbiAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgY2IoZXJyb3IpXG4gICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgIH1cbiAgICAgIH1cbiAgIH1cblxuICAgLyoqXG4gICAgKiBNYWtlIGEgcmVxdWVzdCB0byBhbiBlbmRwb2ludCB0aGUgcmV0dXJucyAyMDQgd2hlbiB0cnVlIGFuZCA0MDQgd2hlbiBmYWxzZVxuICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSB0aGUgcGF0aCB0byByZXF1ZXN0XG4gICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAtIGFueSBxdWVyeSBwYXJhbWV0ZXJzIGZvciB0aGUgcmVxdWVzdFxuICAgICogQHBhcmFtIHtSZXF1ZXN0YWJsZS5jYWxsYmFja30gY2IgLSB0aGUgY2FsbGJhY2sgdGhhdCB3aWxsIHJlY2VpdmUgYHRydWVgIG9yIGBmYWxzZWBcbiAgICAqIEBwYXJhbSB7bWV0aG9kfSBbbWV0aG9kPUdFVF0gLSBIVFRQIE1ldGhvZCB0byB1c2VcbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIHByb21pc2UgZm9yIHRoZSBodHRwIHJlcXVlc3RcbiAgICAqL1xuICAgX3JlcXVlc3QyMDRvcjQwNChwYXRoLCBkYXRhLCBjYiwgbWV0aG9kID0gJ0dFVCcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KG1ldGhvZCwgcGF0aCwgZGF0YSlcbiAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgY2IobnVsbCwgdHJ1ZSwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICB9LCBmdW5jdGlvbiBmYWlsdXJlKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UucmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgICAgY2IobnVsbCwgZmFsc2UsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAgICBjYihyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyByZXNwb25zZTtcbiAgICAgICAgIH0pO1xuICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlcXVlc3RhYmxlO1xuXG4vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAvL1xuLy8gIFByaXZhdGUgaGVscGVyIGZ1bmN0aW9ucyAgLy9cbi8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIC8vXG5jb25zdCBNRVRIT0RTX1dJVEhfTk9fQk9EWSA9IFsnR0VUJywgJ0hFQUQnLCAnREVMRVRFJ107XG5cbmZ1bmN0aW9uIG1ldGhvZEhhc05vQm9keShtZXRob2QpIHtcbiAgIHJldHVybiBNRVRIT0RTX1dJVEhfTk9fQk9EWS5pbmRleE9mKG1ldGhvZCkgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBjYWxsYmFja0Vycm9yT3JUaHJvdyhjYiwgcGF0aCkge1xuICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZXIob2JqZWN0KSB7XG4gICAgICBsZXQgZXJyb3I7XG4gICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KCdjb25maWcnKSkge1xuICAgICAgICAgY29uc3QgeyByZXNwb25zZTogeyBzdGF0dXMsIHN0YXR1c1RleHQgfSwgY29uZmlnOiB7IG1ldGhvZCwgdXJsIH0gfSA9IG9iamVjdDtcbiAgICAgICAgIGxldCBtZXNzYWdlID0gKGAke3N0YXR1c30gZXJyb3IgbWFraW5nIHJlcXVlc3QgJHttZXRob2R9ICR7dXJsfTogXCIke3N0YXR1c1RleHR9XCJgKTtcbiAgICAgICAgIGVycm9yID0gbmV3IFJlc3BvbnNlRXJyb3IobWVzc2FnZSwgcGF0aCwgb2JqZWN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICBlcnJvciA9IG9iamVjdDtcbiAgICAgIH1cbiAgICAgIGlmIChjYikge1xuICAgICAgICAgY2IoZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgfTtcbn1cbiIsImltcG9ydCBSZXF1ZXN0YWJsZSBmcm9tICcuL1JlcXVlc3RhYmxlJztcblxuY2xhc3MgVG9waWMgZXh0ZW5kcyBSZXF1ZXN0YWJsZSB7XG5cbiAgY29uc3RydWN0b3IoYXV0aCwgYXBpQmFzZSkge1xuICAgIHN1cGVyKGF1dGgsIGFwaUJhc2UpXG4gIH1cblxuXG4gIC8qKlxuICAgKiBHZXQgc2luZ2xlIHRvcGljc1xuICAgKiBAcGFyYW0ge251bWJlcn0gW2lkXVxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG4gIGdldE9uZShpZCwgb3B0aW9ucywgY2IpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnR0VUJywgYC90LyR7aWR9Lmpzb25gLCBudWxsLCBvcHRpb25zLCBjYik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgdG9waWNzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cbiAgZ2V0QWxsKG9wdGlvbnMsIGNiKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ0dFVCcsICcvdG9waWNzJywgbnVsbCwgb3B0aW9ucywgY2IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHRvcGljcyBieSB1c2VybmFtZS5cbiAgICogQHBhcmFtIHtvYmplY3R9IFtvYmplY3RdXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0LnVzZXJuYW1lXVxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG4gIGdldEJ5KHsgdXNlcm5hbWUgfSwgb3B0aW9ucywgY2IpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnR0VUJywgYC90b3BpY3MvY3JlYXRlZC1ieS8ke3VzZXJuYW1lfS5qc29uYCwgbnVsbCwgb3B0aW9ucywgY2IpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEdldCBhbGwgbGF0ZXN0IHRvcGljc1xuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG4gIGdldExhdGVzdChvcHRpb25zLCBjYikge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdHRVQnLCAnL2xhdGVzdC5qc29uJywgbnVsbCwgb3B0aW9ucywgY2IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdG9waWN8cG9zdHxwbVxuICAgKiBAcGFyYW0ge29iamVjdH0gW29iamVjdF1cbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuICBjcmVhdGUoZGF0YSwgb3B0aW9ucywgY2IpIHtcblxuICAgIGlmICghZGF0YS5yYXcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmF3IGlzIHJlcXVpcmVkLicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdQT1NUJywgJy9wb3N0cy5qc29uJywgZGF0YSwgb3B0aW9ucywgY2IpO1xuICB9O1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gVG9waWMiLCJpbXBvcnQgUmVxdWVzdGFibGUgZnJvbSAnLi9SZXF1ZXN0YWJsZSc7XG5cbmNsYXNzIFVzZXIgZXh0ZW5kcyBSZXF1ZXN0YWJsZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBhcGlCYXNlKSB7XG4gICAgICAgIHN1cGVyKGF1dGgsIGFwaUJhc2UpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIG5ldyB1c2VyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvYmplY3RdIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0LnVzZXJuYW1lXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0LmVtYWlsXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0LnBhc3N3b3JkXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0Lm5hbWVdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb2JqZWN0LmFjdGl2ZV1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqL1xuICAgIGNyZWF0ZSh7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIG5hbWUsIGFjdGl2ZSB9LCBvcHRpb25zLCBjYikge1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgJ25hbWUnOiBuYW1lLFxuICAgICAgICAgICAgJ2VtYWlsJzogZW1haWwsXG4gICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcbiAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkLFxuICAgICAgICAgICAgJ2FjdGl2ZSc6IGFjdGl2ZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnUE9TVCcsICcvdXNlcnMnLCBkYXRhLCBvcHRpb25zLCBjYik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldCB1c2VyIGJ5IHVzZXJuYW1lXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvYmplY3RdIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb2JqZWN0LnVzZXJuYW1lIF1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqL1xuICAgIGdldE9uZSh7dXNlcm5hbWV9LCBvcHRpb25zLCBjYikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnR0VUJywgJy91c2Vycy8nICsgdXNlcm5hbWUgKyAnLmpzb24nLCBudWxsLCBvcHRpb25zLCBjYik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXQgdXNlciBieSBpZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaWRdXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKi9cbiAgICBkZWxldGUoaWQsIG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdERUxFVEUnLCAnL2FkbWluL3VzZXJzLycgKyBpZCArICcuanNvbicsIG51bGwsIG9wdGlvbnMsIGNiKTtcbiAgICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVc2VyIl19"}